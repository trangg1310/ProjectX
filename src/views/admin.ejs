<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cellz.clothing</title>
  <link rel="stylesheet" href="/icon/themify-icons-font/themify-icons/themify-icons.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.74.1/dist/L.Control.Locate.min.css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
  <script src="https://code.jquery.com/jquery-3.4.1.js"></script>

<style>
  *{
  padding: 0;
  margin: 0;
  text-decoration: none;
  list-style: none;
  box-sizing: border-box;
}
html{
  scroll-behavior: smooth;
}
body{
  font-family: montserrat;
}
/*Menu*/
ul{
  position: fixed;
  top: 0;
  left: 0;
  margin-left: -240px;
  width: 240px;
  background: #1e1e1e;
  height: 100vh;
  overflow-y: auto;
  transition: all .3s;
}
ul li{
  height: 65px;
  outline: none;
}
ul li a{
  display: block;
  height: 100%;
  width: 100%;
  line-height: 70px;
  font-size: 20px;
  color: white;
  padding-left: 10%;
  background: #1e1e1e;
  border-top: 1px solid rgba(255,255,255,.1);
  border-bottom: 1px solid black;
  border-left: 5px solid transparent;
}
li a.contact{
  border-bottom: 1px solid rgba(0,0,0,.5);
}
.active a{
  color: #464444;
  border-left: 5px solid #fff;
  background: #1B1B1B;
}
/*Home menu*/
.menu-img{
  width: 800px;
  height: 400px;
  margin-left: 400px;
  margin-top: 80px;
}
.menu-home{
  display: inline;
  margin-left: 750px;
}
.menu-home a{
  margin-top: 10px;
  font-size: 30px;
  color: #000;
  text-decoration-line: underline;
}
/*content*/
section{
  margin-left: 0px;
  transition: all .3s;
}
i{
  position: fixed;
  margin: 20px 25px;
  font-size: 30px;
  color: #000;
  cursor: pointer;
}
.sec1{
  margin-left: -20px;
  background-size: cover;
  height: 100vh;
}
.sec2{
  margin-left: -20px;
  background-size: cover;
  height: 100vh;
}
.sec3{
  margin-left: -20px;
  background-size: cover;
  height: 100vh;
}
.sec4{
  margin-left: -20px;
  background-size: cover;
  height: 100vh;
}
.sec5{
  margin-left: -20px;
  background-size: cover;
}
h2{
  font-size: 40px;
  padding: 15px 20px;
}
p{
  padding: 0 20px 10px 20px;
  text-align: justify;
}
.ul_show{
  margin-left: 0px;
}
.slide_image{
  margin-left: 260px;
}
/*San pham */
.menu-product{
  width: 100%;
  text-align: center;
  margin-left: 10px;
}
.btn--add-product{
  color: #fff;
  margin-left: 40px;
  background-color: #000;
  padding: 0 10px ;
  font-size: 20;
  height: 35px;
}
.btn--add-product a{
  color: #fff;
}
.menu-product th{
  padding-bottom: 30px;
  font-family: 'Courier New', Courier, monospace;
  font-size: 18px;
  text-transform: uppercase;
  color: #333;
  border-collapse: collapse;
  border-bottom: 2px solid #dddddd;
  padding: 20px 30px;
}
.menu-product .item-img{
  width: 100px;
  height: 100px;
}
.menu-product td{
  padding: 20px 20px;
  border-bottom: 2px solid #dddddd;
  text-align: center;
  font-family: 'Courier New', Courier, monospace;
  font-size: 15px;
  color: #333;
  margin-top: 10px;
}
.menu-product button{
  color: #fff;
  background-color: #000;
  padding: 0 10px ;
  font-size: 20;
  height: 35px;
}
.menu-product button:hover{
  cursor: pointer;
  background-color: #464444;
}
/* Thêm sản phẩm */
.add-product{
  position: fixed;
  top: 0;
  left: 0;
  width: 240px;
  background: #1e1e1e;
  height: 100vh;
  overflow-y: auto;
  /* transition: all .3s; */
}
.add-product-show{
  padding: 0px;
}
.modal-container {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
}

.modal1 {
  background-color: #fff;
  padding: 10px;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  width: 800px;
  height: 600px;
}
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0px;
  font-size: 20px;
}
.modal-close {
  cursor: pointer;
}
.product-add-content{
  font-size: 15px;
  padding: 10px 10px;
}
.product-add-content input{
  margin-top: 10px;
  width: 98%;
  height: 30px;
  border: 2px solid #464444;
  padding-left: 6px;
  margin-bottom: 10px;
}
.size span{
  display: inline-block;
  padding: 3px 6px;
  border: 1px solid #dddddd;
  margin: 12px 10px 12px 0;
  font-size: 12px;
  cursor: pointer;
  background-color: #ccc;
}
.btn--pick:hover{
  background-color: #000;
  color: #fff;
  cursor: pointer;
}
.auth-form__controls{
  margin-left: 500px;
  margin-top: 5px;
  display: inline-block;
}
.btn--save , .btn--exit{
  margin-left: 40px;
  background-color: #000;
  padding: 10px 10px ;
  font-size: 20;
  height: 35px;
  width: 50px;
  color: #fff;
}
.btn--exit:hover, .btn--save:hover{
  cursor: pointer;
  background-color: rgb(43, 42, 42);
}


/*Khach hang*/
.menu-client{
  width: 100%;
  text-align: center;
  margin-left: 20px;
}
.menu-client th{
  padding-bottom: 30px;
  font-family: 'Courier New', Courier, monospace;
  font-size: 20px;
  text-transform: uppercase;
  color: #333;
  border-collapse: collapse;
  border-bottom: 2px solid #dddddd;
  padding: 20px 40px;
}
.menu-client td{
  padding: 20px 20px;
  border-bottom: 2px solid #dddddd;
  text-align: center;
  font-family: 'Courier New', Courier, monospace;
  font-size: 15px;
  color: #333;
}
.menu-client button{
  color: #fff;
  background-color: #000;
  padding: 0 10px ;
  font-size: 20;
  height: 35px;
}
.menu-client button:hover{
  cursor: pointer;
  background-color: #464444;
}
/* update client */
.update-user{
  position: fixed;
  top: 0;
  left: 0;
  width: 240px;
  background: #1e1e1e;
  height: 100vh;
  overflow-y: auto;
  /* transition: all .3s; */
}
.update-user{
  padding: 0px;
}
.user-update-content{
  font-size: 15px;
  padding: 10px 10px;
}
.user-update-content input{
  margin-top: 10px;
  width: 98%;
  height: 30px;
  border: 2px solid #464444;
  padding-left: 6px;
  margin-bottom: 10px;
}
.auth-form__controls{
  margin-left: 500px;
  margin-top: 5px;
  display: inline-block;
}
.btn--save , .btn--exit{
  margin-left: 40px;
  background-color: #000;
  padding: 10px 10px ;
  font-size: 20;
  height: 35px;
  width: 50px;
  color: #fff;
}
.btn--exit:hover, .btn--save:hover{
  cursor: pointer;
  background-color: rgb(43, 42, 42);
}



/* Đơn hàng */
.menu-theorder{
  width: 100%;
  text-align: center;
  margin-left: 0px;
}
.menu-theorder th{
  padding-bottom: 30px;
  font-family: 'Courier New', Courier, monospace;
  font-size: 18px;
  text-transform: uppercase;
  color: #333;
  border-collapse: collapse;
  border-bottom: 2px solid #dddddd;
  padding: 20px 20px;
}
.menu-theorder td{
  padding: 15px 15px;
  border-bottom: 2px solid #dddddd;
  text-align: center;
  font-family: 'Courier New', Courier, monospace;
  font-size: 13px;
  color: #333;
}
.menu-theorder button{
  color: #fff;
  background-color: #000;
  padding: 0 5px ;
  font-size: 15px;
  height: 25px;
}
.menu-theorder button:hover{
  cursor: pointer;
  background-color: #464444;
}
.btn--add-cart{
  margin-left: 40px;
  background-color: #000;
  padding: 0 10px ;
  font-size: 20;
  height: 35px;
}
.btn--add-cart a{
  color: #fff;
}
/* them don hang */
.add-theorder{
  position: fixed;
  top: 0;
  left: 0;
  width: 240px;
  background: #1e1e1e;
  height: 100vh;
  overflow-y: auto;
  /* transition: all .3s; */
}
.add-theorder-show{
  padding: 0px;
}
.modal-container {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
}

.modal2 {
  background-color: #fff;
  padding: 10px;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  width: 800px;
  height: 620px;
}
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0px;
  font-size: 15px;
}
.modal-close {
  cursor: pointer;
}
.theorder-add-content{
  display: inline;
  font-size: 15px;
  padding: 10px 10px;
}
.theorder-add-content input{
  display: table;
  margin-top: 10px;
  width: 70%;
  height: 30px;
  border: 2px solid #464444;
  padding-left: 6px;
  margin-bottom: 10px;
}
.auth-form__controls{
  margin-left: 530px;
  margin-top: 5px;
  display: inline-block;
}
.btn--save , .btn--exit{
  margin-left: 40px;
  background-color: #000;
  padding: 10px 10px ;
  font-size: 20;
  height: 35px;
  width: 50px;
  color: #fff;
}
.btn--exit:hover, .btn--save:hover{
  cursor: pointer;
  background-color: rgb(43, 42, 42);
}


/* Danh muc */
.menu-category{
  width: 100%;
  text-align: center;
  margin-left: 0px;
}
.menu-category th{
  padding-bottom: 30px;
  font-family: 'Courier New', Courier, monospace;
  font-size: 18px;
  text-transform: uppercase;
  color: #333;
  border-collapse: collapse;
  border-bottom: 2px solid #dddddd;
  padding: 20px 20px;
}
.menu-category td{
  padding: 15px 15px;
  border-bottom: 2px solid #dddddd;
  text-align: center;
  font-family: 'Courier New', Courier, monospace;
  font-size: 13px;
  color: #333;
}
.menu-category button{

  color: #fff;
  background-color: #000;
  padding: 0 5px ;
  font-size: 15px;
  height: 25px;
}
.menu-category button:hover{
  cursor: pointer;
  background-color: #464444;
}
.btn--add-cate{
  margin-left: 40px;
  background-color: #000;
  padding: 0 10px ;
  font-size: 20;
  height: 35px;
}
.btn--add-cate a{
  color: #fff;
}
/* them danh muc */
.add-category{
  position: fixed;
  top: 0;
  left: 0;
  width: 240px;
  background: #1e1e1e;
  height: 100vh;
  overflow-y: auto;
  /* transition: all .3s; */
}
.add-category-show{
  padding: 0px;
}
.modal-container {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
}
.modal3 {
  background-color: #fff;
  padding: 10px;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  width: 800px;
  height: 620px;
}
.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0px;
  font-size: 15px;
}
.modal-close {
  cursor: pointer;
}
.category-add-content{
  display: inline;
  font-size: 15px;
  padding: 10px 10px;
}
.category-add-content input{
  display: table;
  margin-top: 10px;
  width: 70%;
  height: 30px;
  border: 2px solid #464444;
  padding-left: 6px;
  margin-bottom: 10px;
}
.auth-form__controls{
  margin-left: 530px;
  margin-top: 5px;
  display: inline-block;
}
.btn--save , .btn--exit{
  margin-left: 40px;
  background-color: #000;
  padding: 10px 10px ;
  font-size: 20;
  height: 35px;
  width: 50px;
  color: #fff;
}
.btn--exit:hover, .btn--save:hover{
  cursor: pointer;
  background-color: rgb(43, 42, 42);
}
.card {
  max-height: 800px; /* Đặt chiều cao tối đa cho card (tùy chọn) */
  border: 1px solid #ddd; /* Thêm viền cho card (tùy chọn) */
  overflow-y: hidden; /* Ẩn thanh cuộn toàn bộ card */
  overflow: hidden;
  display: flex;
  flex-direction: column;
  margin: 50px 30px;
  position: unset;
}

.card-header {
  background-color: #f0f0f0; /* Màu nền của card-header (tùy chọn) */
  padding: 10px; /* Thêm padding cho card-header (tùy chọn) */
}

.card-body {
  flex: 1; /* Co giãn để lấp đầy không gian còn lại */
  overflow-y: auto; /* Cho phép cuộn nếu nội dung vượt quá chiều cao */
  padding: 10px; /* Thêm padding cho card-body (tùy chọn) */
}

.scrollable-content {
  max-height: 100%; /* Chiều cao tối đa của tbody có thể cuộn */
  overflow-y: auto; /* Cho phép cuộn nếu nội dung vượt quá chiều cao của tbody */
}

.alert {
  margin-left: 280px;
  margin-top: 50px;
  margin-right: 30px;
}

</style>

</head>
<body>
<!--Menu-->
<ul class="ul_show">
  <li class="active"><a href="#">Home</a></li>
  <li><a href="#product">Product</a></li>
  <li><a href="#client">Client</a></li>
  <li><a href="#theorder">The order</a></li>
  <li><a href="#category">Category</a></li>
  <li><a href="#statistic">Statistic</a></li>
  <li><a href="">Log Out</a></li>
</ul>
<div class="menu-pic" style="margin-bottom: 30px;">
<img src="image/Slider/Slider1.png" alt=""class="menu-img">
</div>
<% if (messages.success_msg) { %></p>
  <div class="alert alert-success alert-dismissible fade show" role="alert"><%= messages.success_msg %>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
<% } %>

<% if (messages.error) { %>
    <div class="alert alert-warning alert-dismissible fade show" role="alert"><%= messages.error %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
<% } %>


<!--Content-->
<section class="slide_image">
<!--Sản phẩm-->
<div class="card">
  <div class="sec1" style="display: none;"></div>
  <div class="card-header">
    <h2 id="product">Product</h2>
    <input type="text" id="searchInput" placeholder="NameItem/IDSP">
    <button class="btn--add-product">Add More</button>
  </div>
  <div class="menu-product card-body">

      <table>
        <thead>
          <tr>
            <th>IdSP</th>
            <th>Category</th>
            <th>Name Item</th>
            <th>Size</th>
            <th>QUANTITY</th>
            <th>PRICE</th>
          </tr>
        </thead>
        <tbody class="scrollable-content">
          <%for(let index = 0; index < product.length; index++) {%>
            <form action="/adminproduct" method="post">
              <tr>
                <td><input name="idSPCT" value="<%=product[index].idSPCT%>" readonly></td>
                <input name="idSP" value="<%=product[index].idSP%>" hidden>
                <td>
                  <select name="idDM" style="background-color: transparent; border: none; padding: 8px 0px;" id="nameDM">
                      <% for (let i = 0; i < danhmuc.length; i++) { %>
                          <% if(product[index].nameDM == danhmuc[i].nameDM) { %>
                            <option value="<%=danhmuc[i].idDM%>" selected><%=danhmuc[i].nameDM%></option>
                          <% } else { %>
                            <option value="<%=danhmuc[i].idDM%>"><%=danhmuc[i].nameDM%></option>
                          <% } %>
                      <% } %>
                  </select>
                </td>
                <td><p><input name="nameSP" value="<%=product[index].nameSP%>" required></p></td>
                <td><span><input name="size" value="<%=product[index].size%>" required></span></td>
                <td><span><input name="soLuong" value="<%=product[index].soLuong%>" required></span> </td>
                <td> <span><input name="giaBan" value="<%=product[index].giaBan%>" required></span> </td>
                <td><button type="submit" name="action" value="update" class="btn--upda-product">Update</button></td>
                <td><button type="submit" name="action" value="delete">Delete</button></td>
              </tr>
            </form>
          <%}%>
        </tbody>
      </table>
  </div>
</div>
<!-- lọc sản phẩm -->
<script>
  document.getElementById("searchInput").addEventListener("input", function () {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("searchInput");
    filter = input.value.toUpperCase();
    table = document.querySelector(".menu-product table");
    tr = table.getElementsByTagName("tr");

    for (i = 1; i < tr.length; i++) {
      var nameSPCell = tr[i].querySelector("[name='nameSP']");
      var idSPCell = tr[i].querySelector("[name='idSPCT']");
      if (nameSPCell && idSPCell) {
        // Sử dụng .textContent hoặc .innerText để truy cập giá trị
        txtValue = nameSPCell.value.toUpperCase();
        var idSPValue = idSPCell.value;

        // Kiểm tra giá trị thực tế của txtValue và idSPValue
        console.log('txtValue:', txtValue);
        console.log('idSPValue:', idSPValue);

        // Check if either the nameSP or idSP contains the filter
        if (txtValue.includes(filter) || idSPValue.includes(filter)) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
  });
</script>



<!-- thêm sản phẩm -->
<div class="modal-container" id="myModal1">
<div class="modal1">
    <div class="modal-header">
      <h2>Product</h2>
    </div>
    <div class="add-product">
      <form action="/admincreateproduct" method="post">
        <div class="product">
          <div class="product-add-content">
            <label for="">Id Category</label>
            <input type="text" name="idCategory">
          </div>

          <div class="product-add-content">
            <label for="">Name Item</label>
            <input type="text" name="nameItem">
          </div>

          <div class="product-add-content">
            <label for="">Size</label>
            <div class="size">
              <span>XS</span>
                <span>S</span>
                <span>M</span>
                <span>L</span>
            </div>
          </div>

          <div class="product-add-content">
            <label for="">Quantity</label>
            <input type="text" name="quantity">
          </div>

          <div class="product-add-content">
            <label for="">Price</label>
            <input type="text" name="price">
          </div>

          <div class="product-add-content">
            <label for="">Image</label>
            <button class="btn--pick" type="submit">Pick your image</button>
          </div>

          <div class="auth-form__controls">
            <button class="btn--save" type="submit">Save</button>
            <button class="btn--exit">Exit</button>
          </div>
        </div>
      </form>
    </div>
</div>
</div>


<!--Khách hàng-->
<div class="card">
  <div class="sec2" style="display: none;"></div>
  <div class="card-header">
    <h2 id="client">Client</h2>
    <input type="text" id="searchInputClient" placeholder="Email">
  </div>
  <div class="menu-client card-body">
      <table>
        <thead>
          <tr>
            <th>IdUser </th>
            <th>Email</th>
            <th>Name</th>
            <th>Adress</th>
            <th>Phone Number</th>
          </tr>
        </thead>
        <tbody class="scrollable-content">
          <% for(let index = 0; index < user.length; index++)  {%>
            <form action="/adminuser" method="post">
              <tr>
                <td><input name="idUser" value="<%=user[index].idUser%>" readonly></td>
                <td><input name="email" value="<%=user[index].email%>" readonly></td>
                <td><p><input name="name" value="<%=user[index].name%>" required></p></td>
                <td><p><input name="address" value="<%=user[index].address%>" required></p></td>
                <td><span><input name="phoneNumber" value="<%=user[index].phoneNumber%>" required> </span> </td>
                <td><button type="submit" name="action" value="update" class="btn--update-user">Update</button></td>
                <td><button type="submit" name="action" value="delete">Delete</button></td>
              </tr>
            </form>
          <%}%>
        </tbody>
      </table>
  </div>
</div>

<script>
  document.getElementById("searchInputClient").addEventListener("input", function () {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("searchInputClient");
    filter = input.value.toUpperCase();
    table = document.querySelector(".menu-client table"); // Sửa đổi đường dẫn đến bảng
    tr = table.getElementsByTagName("tr");

    for (i = 0; i < tr.length; i++) { // Bắt đầu từ i = 0 để bao gồm cả hàng tiêu đề
      var emailCell = tr[i].querySelector("[name='email']");
      if (emailCell) {
        // Sử dụng .value để truy cập giá trị
        txtValue = emailCell.value.toUpperCase();
        // Check if the email contains the filter
        if (txtValue.includes(filter)) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
  });
</script>



<!--Đơn hàng-->
<div class="card">
  <div class="sec3" style="display: none;"></div>
  <div class="card-header">
    <h2 id="theorder">The Order</h2>
    <input type="text" id="searchInputTheOrder" placeholder="Phone Number">
    <button class="btn--add-cart"><a style="text-decoration: none" href="">ADD</a></button>
  </div>
  <div class="menu-theorder card-body">
      <table>
        <thead>
          <tr>
            <th>IdDH</th>
            <th>IdDHCT</th>
            <th>Id User</th>
            <th>Address</th>
            <th>Phone Number</th>
            <th>IDSP</th>
            <th>QUANTITY</th>
            <th>Total amount</th>
            <th>Time</th>
            <th>STATUS</th>
          </tr>
        </thead>
        <tbody class="scrollable-content">
          <% for(let index = 0; index < history.length; index++)  {%>
            <form action="/adminorder" method="post">
              <tr>
                <td><input name="idDH" value="<%=history[index].idDH%>" readonly></td>
                <td><input name="idDHCT" value="<%=history[index].idDHCT%>" readonly></td>
                <td><p><input name="idUser" value="<%=history[index].idUser%>" readonly></p></td>
                <td><p><input name="address" value="<%=history[index].address%>" required></p></td>
                <td><span><input name="phoneNumber" value="<%=history[index].phoneNumber%>" required> </span> </td>
                <td><span><input name="idSPCT" value="<%=history[index].idSPCT%>" required> </span> </td>
                <td><span><input name="soLuong" value="<%=history[index].soLuong%>" required> </span> </td>
                <td><span><input name="thanhTien" value="<%=history[index].soLuong * history[index].giaBan%>" readonly> </span> </td>
                <td><span><input name="timeCreate" value="<%= history[index].timeCreate.getFullYear()%>-<%=history[index].timeCreate.getMonth()+1%>-<%=history[index].timeCreate.getDate()%>" readonly> </span></td>
                <td>
                  <select name="trangThai" style="background-color: transparent; border: none; padding: 8px 0px;" id="trangThai">
                      <% if (history[index].trangThai === "Chờ giao hàng") { %>
                          <option value="Chờ giao hàng" selected>Chờ giao hàng</option>
                          <option value="Đang giao hàng">Đang giao hàng</option>
                          <option value="Đã giao hàng">Đã giao hàng</option>
                          <option value="Đã hủy">Đã hủy</option>
                      <% } else if (history[index].trangThai === "Đang giao hàng") {%>
                        <option value="Chờ giao hàng">Chờ giao hàng</option>
                        <option value="Đang giao hàng" selected>Đang giao hàng</option>
                        <option value="Đã giao hàng">Đã giao hàng</option>
                        <option value="Đã hủy">Đã hủy</option>
                      <% } else if (history[index].trangThai === "Đã giao hàng") { %>
                        <option value="Chờ giao hàng">Chờ giao hàng</option>
                        <option value="Đang giao hàng" >Đang giao hàng</option>
                        <option value="Đã giao hàng"selected>Đã giao hàng</option>
                        <option value="Đã hủy">Đã hủy</option>
                      <% } else if (history[index].trangThai === "Đã hủy") { %>
                        <option value="Chờ giao hàng">Chờ giao hàng</option>
                        <option value="Đang giao hàng" >Đang giao hàng</option>
                        <option value="Đã giao hàng">Đã giao hàng</option>
                        <option value="Đã hủy"selected>Đã hủy</option>
                      <% } %>
                  </select>
                </td>
                <td><button type="submit" name="action" value="update" class="btn--update-user">Update</button></td>
                <td><button type="submit" name="action" value="delete">Delete</button></td>
              </tr>
            </form>
          <%}%>
        </tbody>
      </table>
  </div>
</div>

<script>
  document.getElementById("searchInputTheOrder").addEventListener("input", function () {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("searchInputTheOrder");
    filter = input.value.toUpperCase();
    table = document.querySelector(".menu-theorder table"); // Sửa đổi đường dẫn đến bảng
    tr = table.getElementsByTagName("tr");

    for (i = 0; i < tr.length; i++) { // Bắt đầu từ i = 0 để bao gồm cả hàng tiêu đề
      var phoneNumberCell = tr[i].querySelector("[name='phoneNumber']");
      if (phoneNumberCell) {
        // Sử dụng .value để truy cập giá trị
        txtValue = phoneNumberCell.value.toUpperCase();
        // Check if the email contains the filter
        if (txtValue.includes(filter)) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
  });
</script>

<!--Them don hang-->
<div class="modal-container" id="myModal2">
<div class="modal2">
    <div class="modal-header">
      <h2>The Order</h2>
    </div>
    <div class="add-theorder">
      <form action="" method="post">
        <div class="theorder">
          <div class="theorder-add-content">
            <label for="">Id User</label>
            <input type="text" name="idUser">
          </div>

          <div class="theorder-add-content">
            <label for="">Name User</label>
            <input type="text" name="nameUser">
          </div>

          <div class="theorder-add-content">
            <label for="">Address</label>
            <input type="text" name="address">
          </div>

          <div class="theorder-add-content">
            <label for="">Phone Number</label>
            <input type="text" name="phoneNumber">
          </div>

          <div class="theorder-add-content">
            <label for="">Quantity</label>
            <input type="text" name="quantity">
          </div>
          <div class="theorder-add-content">
            <label for="">Total Amount</label>
            <input type="text" name="totalAmount">
          </div>
          <div class="theorder-add-content">
            <label for="">Status</label>
            <input type="text" name="status">
          </div>
          <div class="auth-form__controls">
            <button class="btn--save" type="submit">Save</button>
            <button class="btn--exit" type="submit">Exit</button>
          </div>
        </div>
      </form>
    </div>
</div>
</div>


<!--Danh muc-->
<div class="card">
  <div class="card-header">
    <h2 id="category">Category</h2>
    <button class="btn--add-cate"><a style="text-decoration: none" href="">ADD</a></button>
  </div>
  <div class="menu-category card-body">
    <table>
      <thead>
      <tr>
        <th>Id</th>
        <th>Name Category</th>
      </tr>
      </thead>
      <tbody class="scrollable-content">
      <%for(let index = 0; index < danhmuc.length; index++) {%>
        <tr>
          <form action="/admincategory" method="post">
            <td><input name="idDM" value="<%=danhmuc[index].idDM%>" readonly></td>
            <td><p><input name="nameDM" value="<%=danhmuc[index].nameDM%>" required></p></td>
            <td><button type="submit" name="action" value="update" class="btn--upda-cate">Update</button></td>
            <td><button type="submit" name="action" value="delete">Delete</button></td>
          </form>
        </tr>
      <%}%>
      </tbody>
    </table>
  </div>
</div>
<!--Them danh muc-->
<div class="modal-container" id="myModal3">
<div class="modal3">
    <div class="modal-header">
      <h2>Category</h2>
    </div>
    <div class="add-category">
      <form action="" method="post">
        <div class="category">
          <div class="category-add-content">
            <label for="">Id Category</label>
            <input type="text" name="idAccount">
          </div>

          <div class="category-add-content">
            <label for="">Name</label>
            <input type="text" name="name">
          </div>

          <div class="auth-form__controls">
            <button class="btn--save" type="submit">Save</button>
            <button class="btn--exit" type="submit">Exit</button>
          </div>
        </div>
      </form>
    </div>
</div>
</div>


<!--Thống kê-->
<div class="sec5 col-12 mb-4" id="doanhso" style="margin-bottom: 0px;">
  <div class="card shadow">
      <div class="card-header">
        <h2 id="statistic">Statistic</h2>
      </div>
      <div class="card-body">
          <label for="begin-date" style="margin-left: 2rem;">Từ ngày:</label>
          <input type="date" name="begin-date" style="text-align: center;" id="begin-date" onchange="runWhenSelectDate()">
          <label for="end-date" style="margin-left: 10rem;">Đến ngày:</label>
          <input type="date" name="end-date" style="text-align: center;" id="end-date" onchange="runWhenSelectDate()">
          <!-- <button class="btn btn-success" id="select-date" style="margin-left: 8rem">Chọn</button> -->

          <canvas id="myChart" style="padding: 2rem 0;"></canvas>
      </div>
  </div>
</div>
</section>

<script type='text/javascript'>
  const history1 = <%-JSON.stringify(doanhthu)%>;
  const cur_date = new Date();
  let cur_d_string = cur_date.getFullYear() + ((cur_date.getMonth() + 1 >= 10) ? '-' : '-0') + (cur_date.getMonth() +1) + ((cur_date.getDate() >= 10) ? '-' : '-0') + cur_date.getDate();
  const begin_date = document.querySelector("#begin-date");
  const end_date = document.querySelector("#end-date");
  // const select_date = document.querySelector("#select-date");

  //ngay ket thuc
  // const cur_date = new Date();
  end_date.value = cur_date.getFullYear() + ((cur_date.getMonth() + 1 >= 10) ? '-' : '-0') + (cur_date.getMonth() +1) + ((cur_date.getDate() >= 10) ? '-' : '-0') + cur_date.getDate();

  //ngay bat dau
  const prev_date = new Date(Date.now() - 10 * 24 * 60 * 60 * 1000);
  begin_date.value = prev_date.getFullYear() + ((prev_date.getMonth() + 1 >= 10) ? '-' : '-0') + (prev_date.getMonth() +1) + ((prev_date.getDate() >= 10) ? '-' : '-0') + prev_date.getDate();

  // console.log(doanhthu);
  let dayArray = [];
  let index = [];

  let myChart = new Chart("myChart", {
      type: 'bar',
      data: {
          // labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
          labels: index,
          datasets: [{
              label: 'Doanh số',
              data: dayArray,
              // backgroundColor: [
              //     'rgba(255, 99, 132, 0.2)',
              //     'rgba(54, 162, 235, 0.2)',
              //     'rgba(255, 206, 86, 0.2)',
              //     'rgba(75, 192, 192, 0.2)',
              //     'rgba(153, 102, 255, 0.2)',
              //     'rgba(255, 159, 64, 0.2)'
              // ],
              backgroundColor: 'rgba(13, 110, 253, 0.5)',
              // borderColor: [
              //     'rgba(255, 99, 132, 1)',
              //     'rgba(54, 162, 235, 1)',
              //     'rgba(255, 206, 86, 1)',
              //     'rgba(75, 192, 192, 1)',
              //     'rgba(153, 102, 255, 1)',
              //     'rgba(255, 159, 64, 1)'
              // ],
              borderColor: 'rgba(25, 111, 61, 0.5)',
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              yAxes: [{
                  display: true,
                  scaleLabel: {
                      display: true,
                      labelString: 'VNĐ'
                  },
                  ticks: {
                      beginAtZero: true
                  }
              }]
          }

      }
  });

  const runWhenSelectDate = function() {
      let tempBegin = new Date(begin_date.value);
      let tempEnd = new Date(end_date.value);
      console.log(tempBegin);
      dayArray = [];
      index = [];

      if(tempBegin > tempEnd) {
          Toastify({
              text: "Ngày bắt đầu phải trước ngày kết thúc",
              position: "center",
              style: {
                  background: "0d6efd"

              },
              duration: 5000,
              close: true
          }).showToast();
          return;
      }
      let temp = [];
      for(let i = 0; i < history1.length; i++) {
          console.log(history1[i].timeCreate)
          let d = new Date(history1[i].timeCreate);
          temp.push( d.getFullYear() + ((d.getMonth() + 1 >= 10) ? ('-' + (d.getMonth() + 1)) : ('-0' + (d.getMonth() + 1))) + ((d.getDate() >= 10) ? ('-' + d.getDate()) : ('-0' + d.getDate())));
      }
      // console.log(temp);
      for(let d = tempBegin; d <= tempEnd; d.setDate(d.getDate() + 1)) {

          let d_string = d.getFullYear() + ((d.getMonth() + 1 >= 10) ? '-' : '-0') + (d.getMonth() +1) + ((d.getDate() >= 10) ? '-' : '-0') + d.getDate();
          index.push(((d.getDate() >= 10) ? '' : '0') + d.getDate() + ((d.getMonth() + 1 >= 10) ? '-' : '-0') + (d.getMonth() +1) + '-' + d.getFullYear());

          if(temp.includes(d_string)) {
              dayArray.push(Number(history1[temp.indexOf(d_string)].doanhthu));
          } else {
              dayArray.push(0);
          }
      }
      // console.log("Mảng lưu doanh số",dayArray);
      // console.log("Mảng lưu ngày", index);

      myChart.data.labels = index;
      myChart.data.datasets[0].data = dayArray;

      myChart.update();


  }

  //Gọi 1 lần khi load trang
  runWhenSelectDate();

  // select_date.addEventListener('click', runWhenSelectDate);
</script>




<script>
// San pham
function openModal1() {
  document.getElementById('myModal1').style.display = 'flex';
}
function closeModal1() {
  document.getElementById('myModal1').style.display = 'none';
}
window.onclick = function(event) {
  if (event.target == document.getElementById('myModal1')) {
      closeModal1();
  }
};

$(document).ready(function(){
  $('li').click(function(){
    $(this).addClass('active').siblings().removeClass('active');
  });

$('button.btn--add-product').click(function(){
        $('.add-product').removeClass('add-product').addClass('add-product-show');
        openModal1(); // Gọi hàm openModal() khi thêm class add-product-show

})
})

//don hang
function openModal2() {
  document.getElementById('myModal2').style.display = 'flex';
}
function closeModal2() {
  document.getElementById('myModal2').style.display = 'none';
}
window.onclick = function(event) {
  if (event.target == document.getElementById('myModal2')) {
      closeModal2();
  }
};

$(document).ready(function(){
  $('li').click(function(){
    $(this).addClass('active').siblings().removeClass('active');
  });

$('button.btn--add-cart').click(function(){
        $('.add-theorder').removeClass('add-theorder').addClass('add-theorder-show');
        openModal2();

})
})


//danh muc
function openModal3() {
  document.getElementById('myModal3').style.display = 'flex';
}
function closeModal3() {
  document.getElementById('myModal3').style.display = 'none';
}
window.onclick = function(event) {
  if (event.target == document.getElementById('myModal3')) {
      closeModal3();
  }
};

$(document).ready(function(){
  $('li').click(function(){
    $(this).addClass('active').siblings().removeClass('active');
  });

$('button.btn--add-cate').click(function(){
        $('.add-category').removeClass('add-category').addClass('add-category-show');
        openModal3();

})
})
</script>

</body>
</html>